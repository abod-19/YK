import asyncio
from pyrogram import Client, filters
from datetime import datetime
from YukkiMusic import app

@app.on_message(filters.new_chat_members)
async def welcome_new_member(client: Client, message):
    chat = await app.get_chat(message.chat.id)
    chat_name = chat.title  # Ø§Ø³Ù… Ø§Ù„Ø¬Ø±ÙˆØ¨
    for new_member in message.new_chat_members:
        first_name = new_member.first_name  # Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        username = new_member.username  # ÙŠÙˆØ²Ø± Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        join_time = datetime.now().strftime("%H:%M:%S")  # Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
        join_date = datetime.now().strftime("%Y-%m-%d")  # Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ

        # Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
        await message.reply_text(f"""
ğ°ğğ¥ğœğ¨ğ¦ğ ğ­ğ¨ ğ­ğ¡ğ ğ ğ«ğ¨ğ®ğ©.ğŸ§¸

__#{chat_name}___

â¥â€¢ Welcome  : {first_name} 
â¥â€¢ User : @{username if username else 'No username'}  
â¥â€¢ time : {join_time}
â¥â€¢ date : {join_date}
""")
